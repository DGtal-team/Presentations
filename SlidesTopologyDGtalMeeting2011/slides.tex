\documentclass[pdftex,francais]{beamer}

% Copyright 2004 by Till Tantau <tantau@users.sourceforge.net>.
%
% This file can be redistributed and/or modified under
% the terms of the GNU Public License, version 2.

%% \ifx\themename\undefined
%%   \def\themename{default}
%% \fi

\usetheme{lama}
%\usetheme{Madrid}
%\usecolortheme{crane}

\usepackage{multirow}
\usepackage[latin1]{inputenc}           %%%  
\usepackage[T1]{fontenc}                %%%
\usepackage[francais]{babel}            %%%

\usepackage{multimedia}
\usepackage{hyperref}
\usepackage{tikz}
\usepackage{listings}

%\newtheorem{theorem}{Théorème}

%\setbeamercovered{transparent}

\title[DGtal topology module]{DGtal: Topology module\\
     \url{http://liris.cnrs.fr/dgtal}
}

\author[J.-O. Lachaud]{Jacques-Olivier Lachaud}

\date{DGtal Meeting, September 2011}


\graphicspath{{Figures/},{Images/},{Graphs/}}

%%% \AtBeginSection[]
%%% {
%%%   \begin{frame}<beamer>
%%%     \frametitle{Plan}
%%%     \tableofcontents[currentsection] %,currentsubsection]
%%%   \end{frame}
%%% }

\input{macros}

\setbeamercolor{qcolorb}{fg={blue!20!black},bg={blue!15!white}}
\setbeamercolor{qcolorub}{fg={blue!10!black},bg={blue!30!white}}
\setbeamercolor{qcolorlb}{fg={blue!20!black},bg={blue!8!white}}
\setbeamercolor{qcolorulb}{fg={blue!10!black},bg={blue!40!white}}
\setbeamercolor{qcolorg}{fg={green!20!black},bg={green!15!white}}
\setbeamercolor{qcolorug}{fg={green!10!black},bg={green!30!white}}
\setbeamercolor{qcolorlg}{fg={green!20!black},bg={green!8!white}}
\setbeamercolor{qcolorulg}{fg={green!10!black},bg={green!40!white}}
\setbeamercolor{qcolorr}{fg={red!20!black},bg={red!15!white}}
\setbeamercolor{qcolorur}{fg={red!10!black},bg={red!30!white}}
\setbeamercolor{qcolorlr}{fg={red!20!black},bg={red!8!white}}
\setbeamercolor{qcolorulr}{fg={red!10!black},bg={red!40!white}}
\newenvironment{myblockbluish}[2]%
	       {\begin{beamerboxesrounded}[lower=qcolorb,upper=qcolorub,width=#1,shadow=true]{#2}}{\end{beamerboxesrounded}}
\newenvironment{myblocklbluish}[2]%
	       {\begin{beamerboxesrounded}[lower=qcolorlb,upper=qcolorulb,width=#1,shadow=true]{#2}}{\end{beamerboxesrounded}}
\newenvironment{myblockgreenish}[2]%
	       {\begin{beamerboxesrounded}[lower=qcolorg,upper=qcolorug,width=#1,shadow=true]{#2}}{\end{beamerboxesrounded}}
\newenvironment{myblocklgreenish}[2]%
	       {\begin{beamerboxesrounded}[lower=qcolorlg,upper=qcolorulg,width=#1,shadow=true]{#2}}{\end{beamerboxesrounded}}
\newenvironment{myblockredish}[2]%
	       {\begin{beamerboxesrounded}[lower=qcolorr,upper=qcolorur,width=#1
,shadow=true]{#2}}{\end{beamerboxesrounded}}
\newenvironment{myblocklredish}[2]%
	       {\begin{beamerboxesrounded}[lower=qcolorlr,upper=qcolorulr,width=#1,shadow=true]{#2}}{\end{beamerboxesrounded}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}

\newlength{\unquart}
\setlength{\unquart}{0.21\textwidth}

%------------------------------------------------------------------------------
\begin{frame}
  \titlepage
\end{frame}
%------------------------------------------------------------------------------

\section{Package topology}

%------------------------------------------------------------------------------
\begin{frame}[squeeze]%[allowframebreaks]
  \frametitle{Package description}

  \begin{myblocklbluish}{\textwidth}{Should contain}
    \begin{itemize}
      \small
    \item classical digital topology {\em à la} Rosenfeld
    \item cartesian cellular topology
    \item digital surface topology {\em à la} Herman
    \item must be the base block of geometric algorithms
    \end{itemize}
  \end{myblocklbluish}
  \begin{myblocklgreenish}{\textwidth}{Examples}
    \begin{itemize}
      \small
    \item adjacencies, connected components, simple points, thinning
    \item cells, boundary operators, incidence, opening, closing
    \item contours, surfel adjacency, surface tracking
    \item topological invariants
    \end{itemize}
  \end{myblocklgreenish}
  \begin{myblocklredish}{\textwidth}{Location}
    \begin{itemize}
      \small
    \item \texttt{\{DGtal\}/src/DGtal/topology}
    \item \texttt{\{DGtal\}/src/DGtal/helpers}
    \item \texttt{\{DGtal\}/tests/DGtal/topology}
    \end{itemize}
  \end{myblocklredish}

\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}%[allowframebreaks]
  \frametitle{Available in DGtal 0.4}
  
  \begin{enumerate}
  \item classical digital topology
    \begin{itemize}
    \item Arbitrary adjacencies in $\Z^n$, but also in subdomains
    \item Digital topology = couple of adjacencies (Rosenfeld)
    \item Object = Topology + Set
    \item Operations: neighborhoods, border, connectedness and connected
      components, decomposition into digital layers, simple points
    \end{itemize}
  \item cubical cellular topology
    \begin{itemize}
    \item cells, adjacent and incident cells, faces and cofaces
    \item signed cells, signed incidence, 
    \end{itemize}
  \item digital surface topology
    \begin{itemize}
    \item surfels, surfel adjacency, surfel neighborhood
    \item surface tracking (normal, fast), contour tracking in $n$D
    \end{itemize}
  \end{enumerate}
\end{frame}
%------------------------------------------------------------------------------


\section{Classical digital topology}

%------------------------------------------------------------------------------
\begin{frame}
  \frametitle{Adjacency}

  \alertred{Genericity} $\Rightarrow$ concept \Concept{CAdjacency}

  \begin{itemize}
  \item Types: \Class{Space}, \Class{Point}, \Class{Adjacency}
  \item Methods: 
    \begin{itemize}
    \item \Method{isAdjacentTo}( p1, p2 )
    \item \Method{isProperlyAdjacentTo}( p1, p2 )
    \item \Method{writeNeighborhood}( p, output\_iterator )
    \item \Method{writeProperNeighborhood}( p, output\_iterator )
    \item \Method{writeNeighborhood}( p, output\_iterator, predicate )
    \item \Method{writeProperNeighborhood}( p, output\_iterator, predicate )
    \end{itemize}
  \item Models: 
    \begin{itemize}
    \item \Class{MetricAdjacency}: 4-, 8-, 6-, 18-, 26-, $2n$-, $3^n-1$- adjacencies
    \item \Class{DomainAdjacency}: adjacency limited by a specified domain.
    \end{itemize}
  \end{itemize}
\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}[containsverbatim]
  \frametitle{Usage}
  \scriptsize
  \lstset{language=c++, numbers=left, tabsize=2, frame=single, breaklines=true, basicstyle=\ttfamily,
    numberstyle=\tiny\ttfamily, framexleftmargin=13mm, xleftmargin=12mm,keywordstyle=\color{blue}\bfseries,%
    commentstyle=\color{red}\textit}
  \begin{lstlisting}
    typedef SpaceND<2> Z2i;
    // Simple definition of metric adjacencies
    typedef MetricAdjacency< Zi2, 1 > Adj4;
    typedef MetricAdjacency< Zi2, 2 > Adj8;
    Adj4 adj4;
    Adj8 adj8;
    // Adjacencies restricted to some given set.
    typedef DigitalSetDomain<DigitalSet> RestrictedDomain;
    typedef DomainAdjacency< RestrictedDomain, Adj4 > RestrictedAdj4;
    typedef DomainAdjacency< RestrictedDomain, Adj8 > RestrictedAdj8;
    DigitalSet mySet ...;
    RestrictedDomain myDomain( mySet );
    RestrictedAdj4 myAdj4( myDomain, adj4 );
    RestrictedAdj8 myAdj8( myDomain, adj8 );
  \end{lstlisting}
\end{frame}


%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Digital topology}
  \alert{Digital topology} = couple of instances of adjacencies

  \begin{itemize}
  \item template class \Class{DigitalTopology}
    \scriptsize
    \lstset{language=c++, numbers=left, tabsize=2, frame=single, breaklines=true, basicstyle=\ttfamily,
      numberstyle=\tiny\ttfamily, framexleftmargin=13mm, xleftmargin=12mm,keywordstyle=\color{blue}\bfseries,%
      commentstyle=\color{red}\textit}
    \begin{lstlisting}
 typedef SpaceND< 3,int > Z3;
 typedef MetricAdjacency< Z3, 1 > Adj6;
 typedef MetricAdjacency< Z3, 2 > Adj18;
 typedef DigitalTopology< Adj6, Adj18 > DT6_18;

 Adj6 adj6;
 Adj18 adj18;
 DT6_18 dt6_18( adj6, adj18, JORDAN_DT );
    \end{lstlisting}
      \normalsize
  \item Jordan topologies may be specified (for future use)
  \item instances are necessary (e.g., adj may not be invariant by translation)
  \item reverse topology is the reversed couple
  \end{itemize}
\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Digital Object}

  \alert{Digital object} = topology $+$ digital set

  \begin{itemize}
  \item template class \Class{Object}

    \scriptsize
    \lstset{language=c++, numbers=left, tabsize=2, frame=single, breaklines=true, basicstyle=\ttfamily,
      numberstyle=\tiny\ttfamily, framexleftmargin=13mm, xleftmargin=12mm,keywordstyle=\color{blue}\bfseries,%
      commentstyle=\color{red}\textit}
    \begin{lstlisting}
 typedef HyperRectDomain< Z3 > Domain; 
 typedef DigitalSetSelector<Domain, BIG_DS+HIGH_BEL_DS>::Type DigitalSet;
 typedef Object<DT6_18, DigitalSet> ObjectType;
 Point p1( -50, -50, -50 ); 
 Point p2( 50, 50, 50 );
 Domain domain( p1, p2 );
 // ball of radius 30
 DigitalSet ball_set( domain );
 Shapes<Domain>::addNorm2Ball( ball_set, Point( 0, 0 ), 30 );
 ObjectType ball_object( dt6_18, ball_set );
 ObjectType clone( ball_object ); // no cost
    \end{lstlisting}

    \normalsize
  \item Objects use smart pointers: they may be passed by value and
    copied without cost

  \end{itemize}
\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Digital Object: main services}

  \begin{itemize}
  \item \Method{neighborhood}( Point ), \Method{properNeighborhood}( Point ) return an \Class{Object} 
  \item border: set of point $\lambda$-adjacent to background. \\
    \Method{border}() return an \Class{Object}
  \item geodesic neighborhoods [Bertrand93]. \\
    \Method{geodesicNeighborhood<TAdj>}( TAdj, Point, uint ) return an \Class{Object}
  \item (lazy) connectedness: \Method{connectedness}, \Method{computeConnectedness}; connected components: \Method{writeComponents}
  \item simple points (valid in Z2 and Z3). \\
    \Method{isSimple}( Point ) return a \Class{bool}
  \item and Objects are drawable in 2D and in 3D (with adjacencies or not).
  \end{itemize}

\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Digital Object: main services}

  \includegraphics[width=0.48\textwidth]{bubble-object-color-borders-48}
  \includegraphics[width=0.48\textwidth]{object-3d-18-6}
\end{frame}
%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Expander: digital layers in an object}
  
  \begin{itemize}
  \item Expansion layer by layer within an object, starting from an initial core
  \item core = a point or a pointset specified by iterators
  \item each new layer = the set of points of the object adjacent to
    the preceding layer
  \item each layer is iterable, has a digital distance to core
  \item finished when no more neighbor expansion is possible
  \item useful for \alert{connectedness}, \alert{geodesic
    neighborhoods} and thus \alert{simpleness}
  \end{itemize}
\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}
  \frametitle{Expander: digital layers in an object}
  \begin{center}
    \begin{tabular}{cc}
      \includegraphics[width=0.4\textwidth]{house-layers4-4} &
      \includegraphics[width=0.4\textwidth]{house-layers4-8} \\
      background in 4-adj &
      background in 8-adj \\
    \end{tabular}

    \texttt{tests/topology/testSimpleExpander.cpp}
  \end{center}
\end{frame}

%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Example: greedy homotopic thinning}
    \scriptsize
    \lstset{language=c++, numbers=left, tabsize=2, frame=single, breaklines=true, basicstyle=\ttfamily,
      numberstyle=\tiny\ttfamily, framexleftmargin=13mm, xleftmargin=12mm,keywordstyle=\color{blue}\bfseries,%
      commentstyle=\color{red}\textit}
    \begin{lstlisting}
  int layer = 0;
  do {
      DigitalSet & S = shape.pointSet();
      std::queue<DigitalSet::Iterator> Q;
      for ( DigitalSet::Iterator it = S.begin(); it != S.end(); ++it )
        if ( shape.\alertred{isSimple}( *it ) )
          Q.push( it );
      nb_simple = 0;
      while ( ! Q.empty() ) {
        DigitalSet::Iterator it = Q.front();
        Q.pop();
        if ( shape.isSimple( *it ) ) {
          S.erase( *it );
          ++nb_simple;
        }
      }
      ++layer;
  } while ( nb_simple != 0 );
    \end{lstlisting}
    \normalsize
    See \texttt{testObject.cpp}
\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Example: greedy homotopic thinning}
  \begin{center}
    \begin{tabular}{cc}
      \includegraphics[width=0.4\textwidth]{shape-thinning-4-8} &
      \includegraphics[width=0.4\textwidth]{shape-thinning-8-4} \\
      thinning in (4,8) &
      thinning in (8,4) \\
    \end{tabular}

    \texttt{tests/topology/testObject.cpp}
  \end{center}
\end{frame}
%------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}[fragile]
  \frametitle{Example: greedy homotopic thinning 3D}
  \begin{center}
    \begin{tabular}{c}
      \includegraphics[width=0.55\textwidth]{thinning-3d} \\
      thinning in (6,26) \\
    \end{tabular}
    
    The thinning algorithm is the same as in 2d.
  \end{center}
\end{frame}
%------------------------------------------------------------------------------

\section{Cubical cellular topology}

%% %------------------------------------------------------------------------------
%% \begin{frame}
%%   \frametitle{Conclusion and perspectives}
  
%%   \begin{itemize}
%%   \item complete Rosenfeld's approach: curves and separation
%%   \item whole digital topology framework of Herman and Udupa
%%     \begin{itemize}
%%     \item digital surface as a couple of $\omega$-adjacent points
%%     \item immediate interior and exterior, interior and exterior
%%     \item $\kappa \lambda$-borders, $\kappa \lambda$-boundaries
%%     \item digital pictures
%%     \end{itemize}
%%   \item interpixel topology or cartesian cellular grid topology 
%%   \end{itemize}
%%   See on-line doc.: \Cb{Digital topology and digital objects}

%% \end{frame}
%% %------------------------------------------------------------------------------

%------------------------------------------------------------------------------
\begin{frame}%[allowframebreaks]
  \frametitle{Next objectives}

  \begin{enumerate}
  \item classical digital topology
    \begin{itemize}
    \item other adjacencies
    \item Adjacency = unoriented graph, create associated concepts
    \item make everything faster with specialization (especially
      simpleness)
    \end{itemize}
  \item cubical cellular topology
    \begin{itemize}
    \item cubical complexes, interior, closure
    \item path, mapping (homotopy) 
    \item chains, boundary operator, cochains, coboundary
    \item (co)homology
    \end{itemize}
  \item digital surface topology
    \begin{itemize}
    \item digital surface concept, digital surface graph and
      cograph, digital surface map
    \end{itemize}
  \end{enumerate}
\end{frame}
%------------------------------------------------------------------------------

\end{document}
